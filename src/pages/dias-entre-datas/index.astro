---
import Base from '../../layouts/BaseLayout.astro';
import CalculatorsGrid from '../../components/CalculatorsGrid.astro';
import AdSlot from '../../components/AdSlot.astro';
import Faq from '../../components/FaqSchema.astro';

const faqs = [
  { question: 'A contagem inclui a data inicial?', answer: 'Calculamos a diferença absoluta entre as datas. Se precisar incluir a data inicial, some 1 ao resultado em dias.' },
  { question: 'Considera anos bissextos?', answer: 'Sim. As datas são tratadas nativamente pelo navegador, incluindo bissextos e meses com durações distintas.' },
  { question: 'Posso calcular em semanas?', answer: 'Mostramos dias e uma aproximação em semanas (dias ÷ 7). Para meses exatos, prefira comparar datas do mesmo dia.' },
  { question: 'Fusos horários afetam o resultado?', answer: 'Usamos meia-noite local (T00:00:00) para minimizar diferenças de fuso ao criar os objetos de data.' },
];

---

<Base title="Dias entre datas" description="Calcule a diferença de dias, semanas e meses entre duas datas.">
  <h1 class="text-2xl font-semibold mb-4">Dias entre datas</h1>

  <form id="form-dias" class="form-wrap grid gap-3">
    <label class="grid gap-1">
      <span>Data inicial</span>
      <input id="a" type="date" class="input border rounded p-2">
    </label>

    <label class="grid gap-1">
      <span>Data final</span>
      <input id="b" type="date" class="input border rounded p-2">
    </label>

    <button class="btn">Calcular</button>
  </form>

  <div id="saida" class="result"></div>

  <AdSlot slotId="6940589775" />

  <section class="prose dark:prose-invert mt-6">
    <h2>Exemplo</h2>
    <p>De 01/01/2025 até 31/12/2025 há 364 dias.</p>
  </section>

  <script is:inline>
    document.getElementById('form-dias').addEventListener('submit', (e) => {
      e.preventDefault();

      const a = document.getElementById('a').value;
      const b = document.getElementById('b').value;

      if (!a || !b) {
        document.getElementById('saida').textContent = 'Selecione as duas datas.';
        return;
      }

      const dataA = new Date(a + 'T00:00:00');
      const dataB = new Date(b + 'T00:00:00');

      const diffMs = Math.abs(dataB - dataA);
      const days = Math.floor(diffMs / 86400000);
      const weeks = (days / 7).toFixed(2);
      const months = (days / 30.44).toFixed(1); // média de dias por mês

      document.getElementById('saida').textContent =
        `${days} dias (~${weeks} semanas ou ${months} meses)`;
    });
  </script>

  <section class="prose dark:prose-invert mt-6">
    <h2>Calcule a diferença entre duas datas</h2>
    <p>Informe a data inicial e final para ver o total de dias entre elas. Também exibimos uma aproximação em semanas para referência rápida.</p>

    <h3>Exemplo</h3>
    <p>De 01/01/2025 a 31/12/2025: 364 dias (~52,00 semanas).</p>

    <h3>Dica</h3>
    <p>Para prazos que começam hoje, selecione a data atual como início. Para incluir a data inicial no total, some 1 dia ao resultado.</p>
  </section>

  <Faq faqs={faqs} />

  <CalculatorsGrid current={Astro.url.pathname} />
</Base>