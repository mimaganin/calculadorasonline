---
import Base from '../../layouts/BaseLayout.astro';
import CalculatorsGrid from '../../components/CalculatorsGrid.astro';
import AdSlot from '../../components/AdSlot.astro';
import Faq from '../../components/FaqSchema.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';

const faqs = [
  { question: 'Quais unidades estão disponíveis?', answer: 'Quilômetro (km), metro (m), centímetro (cm) e milímetro (mm).' },
  { question: 'Como funciona a conversão?', answer: 'Convertendo primeiro para metros (unidade base) e depois para a unidade desejada.' },
  { question: 'Posso usar vírgula?', answer: 'Use ponto para decimais (ex.: 1,5 → 1.5).' },
  { question: 'Haverá mais unidades?', answer: 'Sim, planejamos adicionar milhas, jardas e pés em breve.' },
];

---

<Base title="Conversor de Unidades" description="Converta entre km, m, cm e mm.">
  <h1 class="text-2xl font-semibold mb-4">Conversor de unidades (comprimento)</h1>

  <form id="form-unidades" class="form-wrap grid gap-3">
    <label class="grid gap-1">
      <span>Valor</span>
      <input
        id="val"
        type="number"
        inputmode="decimal"
        step="0.0001"
        placeholder="1.5"
        class="input border rounded p-2"
      >
    </label>

    <label class="grid gap-1">
      <span>De</span>
      <select id="from" class="input border rounded p-2">
        <option>km</option>
        <option>m</option>
        <option>cm</option>
        <option>mm</option>
      </select>
    </label>

    <label class="grid gap-1">
      <span>Para</span>
      <select id="to" class="input border rounded p-2">
        <option>m</option>
        <option>km</option>
        <option>cm</option>
        <option>mm</option>
      </select>
    </label>

    <button class="btn">Converter</button>
  </form>

  <div id="saida" class="result"></div>

  <AdSlot slotId="6940589775" />

  <script is:inline>
    const factor = { km: 1000, m: 1, cm: 0.01, mm: 0.001 };

    function toMeters(v, unit) {
      return v * factor[unit];
    }

    function fromMeters(v, unit) {
      return v / factor[unit];
    }

    document.getElementById('form-unidades').addEventListener('submit', (e) => {
      e.preventDefault();
      const v = parseFloat(document.getElementById('val').value);
      const f = document.getElementById('from').value;
      const t = document.getElementById('to').value;

      if (isNaN(v)) {
        document.getElementById('saida').textContent = 'Informe um valor válido.';
        return;
      }

      const meters = toMeters(v, f);
      const res = fromMeters(meters, t);
      document.getElementById('saida').textContent = `${res.toFixed(4)} ${t}`;
    });
  </script>

  <section class="prose dark:prose-invert mt-6">
    <h2>Converta valores de comprimento</h2>
    <p>Escolha as unidades de origem e destino e informe o valor. A calculadora converte primeiro para metros e em seguida para a unidade escolhida, garantindo consistência.</p>

    <h3>Exemplo</h3>
    <p>1,5 km (1.5) = 1.500 m; 250 cm = 2,5 m.</p>
  </section>

  <Faq faqs={faqs} />

  <CalculatorsGrid current={Astro.url.pathname} />
  <AdSlot slotId="6940589775" />
</Base>
