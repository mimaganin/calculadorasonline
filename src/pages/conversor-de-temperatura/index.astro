---
import Base from '../../layouts/BaseLayout.astro';
import CalculatorsGrid from '../../components/CalculatorsGrid.astro';
import AdSlot from '../../components/AdSlot.astro';
import Faq from '../../components/FaqSchema.astro';

const faqs = [
  { question: 'Quais escalas são suportadas?', answer: 'Celsius, Fahrenheit e Kelvin.' },
  { question: 'Como converter Fahrenheit para Celsius?', answer: 'C = (F − 32) × 5/9.' },
  { question: 'E Celsius para Fahrenheit?', answer: 'F = (C × 9/5) + 32.' },
  { question: 'Como converter Celsius para Kelvin?', answer: 'K = C + 273,15.' },
  { question: 'Posso usar vírgula?', answer: 'Use ponto como separador decimal, por compatibilidade do navegador.' },
];

---

<Base title="Conversor de Temperatura" description="Converta entre Celsius, Fahrenheit e Kelvin.">
  
  <h1 class="text-2xl font-semibold mb-4">Conversor de temperatura</h1>

  <form id="form-temp" class="form-wrap grid gap-3">
    <label class="grid gap-1">
      <span>Valor</span>
      <input
        id="val"
        type="number"
        inputmode="decimal"
        step="0.01"
        placeholder="30"
        class="input border rounded p-2"
      >
    </label>

    <label class="grid gap-1">
      <span>De</span>
      <select id="from" class="input border rounded p-2">
        <option>Celsius</option>
        <option>Fahrenheit</option>
        <option>Kelvin</option>
      </select>
    </label>

    <label class="grid gap-1">
      <span>Para</span>
      <select id="to" class="input border rounded p-2">
        <option>Fahrenheit</option>
        <option>Celsius</option>
        <option>Kelvin</option>
      </select>
    </label>

    <button class="btn">Converter</button>
  </form>

  <div id="saida" class="result"></div>

  <AdSlot slotId="6940589775" />

  <script is:inline>
    // Funções auxiliares
    function c2f(c) { return (c * 9 / 5) + 32; }
    function f2c(f) { return (f - 32) * 5 / 9; }
    function c2k(c) { return c + 273.15; }
    function k2c(k) { return k - 273.15; }

    document.getElementById('form-temp').addEventListener('submit', (e) => {
      e.preventDefault();
      const v = parseFloat(document.getElementById('val').value);
      const f = document.getElementById('from').value;
      const t = document.getElementById('to').value;
      if (isNaN(v)) {
        document.getElementById('saida').textContent = 'Informe um valor numérico válido.';
        return;
      }

      // converte primeiro para Celsius
      let c;
      if (f === 'Celsius') c = v;
      else if (f === 'Fahrenheit') c = f2c(v);
      else c = k2c(v);

      // converte de Celsius para o destino
      let res;
      if (t === 'Celsius') res = c;
      else if (t === 'Fahrenheit') res = c2f(c);
      else res = c2k(c);

      document.getElementById('saida').textContent = `${res.toFixed(2)} ${t}`;
    });
  </script>

  <section class="prose dark:prose-invert mt-6">
    <h2>Converta entre Celsius, Fahrenheit e Kelvin</h2>
    <p>Escolha a escala de origem, informe o valor e selecione a escala de destino. A nossa ferramenta aplica as fórmulas padrão com precisão.</p>

    <h3>Exemplos</h3>
    <ul>
      <li>30 °C → 86 °F</li>
      <li>0 °C → 273,15 K</li>
      <li>68 °F → 20 °C</li>
    </ul>
  </section>

  <Faq faqs={faqs} />

  <CalculatorsGrid current={Astro.url.pathname} />
</Base>