---
import Base from '../layouts/BaseLayout.astro';
import AdSlot from '../components/AdSlot.astro';

const items = [
  { href: '/calculadora-de-idade/', title: 'Idade', desc: 'Anos, meses e dias', icon: 'ğŸ‚' },
  { href: '/calculadora-de-imc/', title: 'IMC', desc: 'Ãndice de massa corporal', icon: 'âš–ï¸' },
  { href: '/calculadora-de-porcentagem/', title: 'Porcentagem', desc: 'Quanto Ã© X% de Y', icon: 'ğŸ’¯' },
  { href: '/dias-entre-datas/', title: 'Dias entre datas', desc: 'DiferenÃ§a em dias', icon: 'ğŸ“†' },
  { href: '/conversor-de-temperatura/', title: 'Temperatura', desc: 'Celsius, Fahrenheit, Kelvin', icon: 'ğŸŒ¡ï¸' },
  { href: '/conversor-de-unidades/', title: 'Unidades', desc: 'Comprimento, peso, volume', icon: 'ğŸ“' },
  { href: '/regra-de-tres/', title: 'Regra de trÃªs', desc: 'ProporÃ§Ãµes simples', icon: 'â—' },
  { href: '/conversor-de-horas/', title: 'Horas', desc: 'Horas â‡„ minutos â‡„ segundos', icon: 'ğŸ•’' },
  { href: '/contador-de-palavras/', title: 'Palavras', desc: 'Contador de palavras/caracteres', icon: 'âœï¸' },
  { href: '/calculadora-de-juros/', title: 'Juros', desc: 'Simples e compostos', icon: 'ğŸ’°' },
];
---

<Base title="Calculadoras Online - Conta RÃ¡pida" description="Calculadoras Online RÃ¡pidas, Sem ComplicaÃ§Ã£o">
  <!-- Hero -->
  <section class="mb-6 text-center sm:text-left">
    <div class="flex items-center justify-center sm:justify-start gap-2 mb-2">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="26"
        height="26"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.8"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="text-white dark:text-blue-400"
      >
        <rect x="3" y="2" width="18" height="20" rx="3" />
        <rect x="7" y="6" width="10" height="4" />
        <path d="M8 14h.01M12 14h.01M16 14h.01M8 17h.01M12 17h.01M16 17h.01" />
      </svg>
      <h1 class="text-3xl font-bold tracking-tight text-white">
        Calculadoras Online RÃ¡pidas, Sem ComplicaÃ§Ã£o
      </h1>
    </div>
    <p class="mt-2 text-sm opacity-80 text-white/90">
      Descubra nossas ferramentas Ãºteis, como calculadora de idade, IMC e muito mais!
    </p>
  </section>

  <!-- Ad no topo do conteÃºdo -->
  <div class="mb-4">
    <div style="min-height:90px" class="rounded-xl border border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-900/60 p-2">
      <AdSlot slotId="3228575471" />
    </div>
  </div>

  <!-- Calculadora destaque: Idade (sem onsubmit inline) -->
  <section class="mt-4">
    <h2 class="text-xl font-semibold mb-3 flex items-center gap-2">ğŸ¯ Calculadora de Idade</h2>
    <form id="form-idade-home" class="form-wrap grid gap-3 sm:grid-cols-[1fr_auto] items-end">
      <label class="grid gap-1">
        <span class="text-sm">Data de nascimento</span>
        <input id="nasc-home" type="date" class="input border rounded p-2 w-full">
      </label>
      <button class="btn">Calcular</button>
    </form>
    <div id="saida-home" class="result"></div>

    <details class="mt-3 text-sm open:pb-2">
      <summary class="cursor-pointer opacity-80">Como calculamos?</summary>
      <p class="mt-2 opacity-80">
        Consideramos a diferenÃ§a entre a data de hoje e a data informada, tratando meses com duraÃ§Ãµes diferentes e anos bissextos.
      </p>
    </details>
  </section>

  <!-- Menu visual para as demais -->
  <section class="mt-8">
    <h2 class="text-xl font-semibold mb-3">Outras calculadoras</h2>
    <ul class="grid gap-3 sm:grid-cols-2 lg:grid-cols-3">
      {items.map(i => (
        <li class="group p-4 rounded-xl border border-gray-200 dark:border-gray-800 hover:shadow-sm transition">
          <a href={i.href} class="no-underline block">
            <div class="flex items-start gap-3">
              <div class="text-2xl">{i.icon}</div>
              <div>
                <h3 class="font-semibold group-hover:underline">{i.title}</h3>
                <p class="text-sm opacity-70">{i.desc}</p>
              </div>
            </div>
          </a>
        </li>
      ))}
    </ul>
  </section>

  <!-- Ad no fim do conteÃºdo -->
  <div class="mt-8">
    <!-- <Ad slotId="HOME_BOTTOM" /> -->
    <div style="min-height:90px" class="rounded-xl bg-gray-100 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-800 flex items-center justify-center text-xs">
      <AdSlot slotId="3228575471" />
    </div>
  </div>

  <!-- Script precisa ficar dentro do <Base> -->
  <script is:inline>
    function diffYMD(from, to) {
      let y = to.getFullYear() - from.getFullYear();
      let m = to.getMonth() - from.getMonth();
      let d = to.getDate() - from.getDate();
      if (d < 0) {
        const prevMonth = new Date(to.getFullYear(), to.getMonth(), 0);
        d += prevMonth.getDate();
        m -= 1;
      }
      if (m < 0) { m += 12; y -= 1; }
      return { y, m, d };
    }

    document.getElementById('form-idade-home').addEventListener('submit', (e) => {
      e.preventDefault();
      const nasc = document.getElementById('nasc-home').value;
      if (!nasc) return;
      const from = new Date(nasc + 'T00:00:00');
      const to = new Date();
      const { y, m, d } = diffYMD(from, to);
      document.getElementById('saida-home').textContent = `${y} anos, ${m} meses e ${d} dias`;
    });
  </script>
</Base>