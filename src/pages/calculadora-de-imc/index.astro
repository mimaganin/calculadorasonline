---
import Base from '../../layouts/BaseLayout.astro';
import CalculatorsGrid from '../../components/CalculatorsGrid.astro';
import AdSlot from '../../components/AdSlot.astro';
import Faq from '../../components/FaqSchema.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';

const faqs = [
  { question: 'Qual é a fórmula do IMC?', answer: 'IMC = peso (kg) ÷ [altura (m)]². Ex.: 70 ÷ 1,75² = 22,9.' },
  { question: 'IMC serve para qualquer pessoa?', answer: 'É um indicador populacional. Não considera composição corporal, gestantes, idosos, atletas e condições específicas. Use como referência, não diagnóstico.' },
  { question: 'Qual a classificação do resultado?', answer: 'Abaixo de 18,5: baixo peso; 18,5–24,9: normal; 25–29,9: sobrepeso; 30+: obesidade. Consulte seu médico para interpretação individual.' },
  { question: 'Posso usar altura em cm?', answer: 'Não diretamente. Informe em metros com ponto decimal (ex.: 170 cm = 1.70).' },
  { question: 'O IMC muda com a idade?', answer: 'A fórmula é a mesma, mas a interpretação pode variar com idade e contexto clínico. Procure um profissional de saúde para avaliação completa.' },
];

---

<Base title="Calculadora de IMC" description="Calcule seu Índice de Massa Corporal rapidamente.">

  <Breadcrumbs />

  <h1 class="text-2xl font-semibold mb-4">Calculadora de IMC</h1>

  <form id="form-imc" class="form-wrap grid gap-3">
    <label class="grid gap-1">
      <span>Altura (m)</span>
      <input id="altura" type="number" inputmode="decimal" step="0.01" placeholder="1.75" class="input border rounded p-2">
    </label>

    <label class="grid gap-1">
      <span>Peso (kg)</span>
      <input id="peso" type="number" inputmode="decimal" step="0.1" placeholder="70" class="input border rounded p-2">
    </label>

    <button class="btn">Calcular</button>
  </form>

  <div id="saida" class="result"></div>

  <AdSlot slotId="6940589775" />

  <section class="prose dark:prose-invert mt-6">
    <h2>O que é IMC</h2>
    <p>IMC = peso ÷ (altura × altura). Exemplo: 70 ÷ (1,75²) = 22,9.</p>
    <ul>
      <li>Abaixo de 18,5 → Abaixo do peso</li>
      <li>18,5 a 24,9 → Peso normal</li>
      <li>25 a 29,9 → Sobrepeso</li>
      <li>30+ → Obesidade</li>
    </ul>
  </section>

  <script is:inline>
    function categoria(imc){
      if (imc < 18.5) return 'Abaixo do peso';
      if (imc < 25)   return 'Peso normal';
      if (imc < 30)   return 'Sobrepeso';
      return 'Obesidade';
    }

    document.getElementById('form-imc').addEventListener('submit', (e) => {
      e.preventDefault();
      const h = parseFloat(document.getElementById('altura').value);
      const p = parseFloat(document.getElementById('peso').value);
      if (!h || !p || h <= 0) return;

      const imc = p / (h * h);
      document.getElementById('saida').textContent = `IMC: ${imc.toFixed(1)} — ${categoria(imc)}`;
    });
  </script>
  
  <section class="prose dark:prose-invert mt-6">
    <h2>Como funciona o cálculo do IMC</h2>
    <p>O Índice de Massa Corporal (IMC) é um indicador simples que relaciona peso e altura para estimar a faixa de peso em adultos. Ele é útil para triagem e acompanhamento geral, mas não substitui avaliação clínica.</p>
    <p>Para calcular: divida o peso em quilogramas pela altura em metros elevada ao quadrado. Nossa calculadora faz essa conta e já mostra a categoria correspondente.</p>

    <h3>Exemplo</h3>
    <p>Uma pessoa com 70 kg e 1,75 m: IMC = 70 ÷ (1,75 × 1,75) = 22,9 (faixa “normal”).</p>

    <h3>Limitações</h3>
    <p>O IMC não distingue massa muscular de gordura corporal. Atletas, gestantes, idosos e pessoas com condições específicas podem precisar de outras medidas (ex.: circunferência abdominal, composição corporal).</p>
  </section>

  <Faq faqs={faqs} />

  <CalculatorsGrid current={Astro.url.pathname} />
  <AdSlot slotId="6940589775" />
</Base>
