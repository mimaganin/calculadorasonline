---
import Base from '../../layouts/BaseLayout.astro';
import CalculatorsGrid from '../../components/CalculatorsGrid.astro';
import AdSlot from '../../components/AdSlot.astro';
import Faq from '../../components/FaqSchema.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';

const faqs = [
  { question: 'Qual a fórmula da regra de três?', answer: 'Se A está para B assim como C está para D, então D = (B × C) ÷ A.' },
  { question: 'Quando usar?', answer: 'Quando há proporcionalidade direta entre grandezas. Se for inversa, ajuste a relação (A/B = D/C).' },
  { question: 'Como identificar proporcionalidade inversa?', answer: 'Se uma grandeza aumenta enquanto a outra diminui para manter o produto constante (ex.: velocidade × tempo), é inversa.' },
  { question: 'Posso usar decimais?', answer: 'Sim. Use ponto como separador decimal para melhor compatibilidade.' },
];

---

<Base title="Regra de três" description="Proporções simples: encontre o valor desconhecido.">
  <h1 class="text-2xl font-semibold mb-4">Calculadora de regra de três</h1>

  <form id="form-regra" class="form-wrap grid gap-3">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
      <label class="grid gap-1">
        <span>A</span>
        <input
          id="a"
          type="number"
          inputmode="decimal"
          step="0.01"
          class="input border rounded p-2"
          placeholder="Ex: 5"
        >
      </label>

      <label class="grid gap-1">
        <span>B</span>
        <input
          id="b"
          type="number"
          inputmode="decimal"
          step="0.01"
          class="input border rounded p-2"
          placeholder="Ex: 10"
        >
      </label>

      <label class="grid gap-1">
        <span>C</span>
        <input
          id="c"
          type="number"
          inputmode="decimal"
          step="0.01"
          class="input border rounded p-2"
          placeholder="Ex: 8"
        >
      </label>

      <div class="grid gap-1">
        <span>Resultado (D)</span>
        <div id="saida" class="border rounded p-2 min-h-[42px] flex items-center"></div>
      </div>
    </div>

    <button class="btn">Calcular</button>
  </form>

  <AdSlot slotId="6940589775" />

  <section class="prose dark:prose-invert mt-6">
    <h2>Exemplo</h2>
    <p>Se 5 maçãs custam 10 €, quanto custam 8? (10 × 8) ÷ 5 = 16 €.</p>
  </section>

  <script is:inline>
    document.getElementById('form-regra').addEventListener('submit', (e) => {
      e.preventDefault();

      const a = parseFloat(document.getElementById('a').value);
      const b = parseFloat(document.getElementById('b').value);
      const c = parseFloat(document.getElementById('c').value);

      if ([a, b, c].some(isNaN) || a === 0) {
        document.getElementById('saida').textContent = 'Preencha todos os campos corretamente (A ≠ 0).';
        return;
      }

      const d = (b * c) / a;
      document.getElementById('saida').textContent = d.toFixed(2);
    });
  </script>

  <section class="prose dark:prose-invert mt-6">
    <h2>Resolva proporções com regra de três</h2>
    <p>Informe três valores para calcular o quarto termo em relações proporcionais. Use quando as grandezas variam na mesma razão (proporcionalidade direta).</p>

    <h3>Exemplo</h3>
    <p>Se 5 unidades custam 10 €, quanto custam 8? D = (10 × 8) ÷ 5 = 16 €.</p>

    <h3>Dica</h3>
    <p>Para situações de proporcionalidade inversa (ex.: velocidade e tempo fixo), inverta uma das razões antes de aplicar a fórmula.</p>
  </section>

  <Faq faqs={faqs} />

  <CalculatorsGrid current={Astro.url.pathname} />
  <AdSlot slotId="6940589775" />
</Base>
